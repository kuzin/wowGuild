"use strict";angular.module("wowApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngOrderObjectBy","processIDFilter","angularMoment","hc.marked","tien.clndr","backand","ngSanitize","markdown","ui.bootstrap","angularLoad"]).config(["BackandProvider","APP_NAME","BACKAND_TOKEN","BACKAND_SECRET",function(a,b,c,d){a.setAppName(b),a.setSignUpToken(c),a.setAnonymousToken(d)}]).config(["$routeProvider","$locationProvider",function(a,b){function c(b,c,d){a.when(d,{templateUrl:"views/"+b+".html",controller:c})}c("main","MainCtrl","/"),c("roster","MainCtrl","/roster"),c("about","MainCtrl","/about"),c("404","MainCtrl","/404"),c("blog","BlogCtrl","/blog"),c("calendar","CalCtrl","/calendar"),c("apply","MainCtrl","/apply"),c("post","PostCtrl","/blog/post"),c("signup","LoginCtrl","/signup"),a.otherwise({redirectTo:"/404"})}]),angular.module("processIDFilter",[]).filter("processID",function(){return function(a){var b=/-avatar\.[^.]+$/,c=a.toString(),d="",e=c.replace(b,d);return e}}),angular.module("wowApp").directive("ngShowYear",["$filter",function(a){return{link:function(b,c){c.text(a("date")(new Date,"yyyy"))}}}]).directive("autoActive",["$location",function(a){return{restrict:"A",scope:!1,link:function(b,c){function d(){var b=a.path();b&&angular.forEach(c.find("li"),function(a){var c=a.querySelector("a");c.href.match("#"+b+"(?=\\?|$)")?angular.element(a).addClass("active"):angular.element(a).removeClass("active")})}d(),b.$on("$locationChangeSuccess",d)}}}]),angular.module("wowApp").factory("ApiService",["$http",function(a){return{get:function(){return a.get("/api")},create:function(b){return a.post("/api",b)},"delete":function(b){return a["delete"]("/api/",+b)}}}]),angular.module("wowApp").constant("APP_NAME","wowapi").constant("API_KEY","kqf7f4abwwnfwbp93m7r6f8nxmerbydm").constant("BASE_URL","https://us.api.battle.net").constant("REALM","Dalaran").constant("GUILD","Seventh Level Save Point").constant("BACKAND_TOKEN","27133402-39d7-4c22-9161-98fe93fce4b1").constant("BACKAND_SECRET","e3b8a7c6-a2b1-4661-b467-c3e62257a852"),angular.module("wowApp").factory("ApiService",["$resource","API_KEY","REALM","GUILD","BASE_URL",function(a,b,c,d,e){return a(e+"/wow/guild/"+c+"/"+d+"?fields=members&locale=en_US&apikey="+b)}]).factory("NewsService",["$resource","API_KEY","REALM","GUILD","BASE_URL",function(a,b,c,d,e){return a(e+"/wow/guild/"+c+"/"+d+"?fields=news&locale=en_US&apikey="+b)}]),angular.module("wowApp").controller("NewsCtrl",["$scope","NewsService","angularLoad",function(a,b,c){var d=b.get();d.$promise.then(function(b){a.newslog=b.news.slice(0,10),setTimeout(function(){$WowheadPower.refreshLinks()},1)})}]).controller("BlogCtrl",["$scope","$log","$http","Backand",function(a,b,c,d){a.$log=b;var e={pageSize:20,pageNumber:1,filter:null,sort:""};c.get(d.getApiUrl()+"/1/objects/posts",e).success(function(b){a.posts=b})}]).controller("PostCtrl",["$route","$scope","$http","Backand","$location",function(a,b,c,d,e){b.title="",b.date="",b.content="",b.imageUrl="",b.postBlog=function(){var a={title:b.title,date:new Date,content:b.content,image:b.imageUrl};c.post(d.getApiUrl()+"/1/objects/posts",a).success(function(a,b){e.path("/#/blog")})}}]),angular.module("wowApp").controller("MainCtrl",["$scope","ApiService",function(a,b){a.wowData=b.get()}]),angular.module("wowApp").controller("CalCtrl",["$scope","$log","$http",function(a,b,c){a.$log=b,a.options={multiDayEvents:{endDate:"end",singleDay:"date",startDate:"start"}},c.get("data/cal.ics").success(function(b){var c=ICAL.parse(b),d=new ICAL.Component(c[2]);a.events=[];var e;for(e=0;e<d.jCal.length;e++){var f=d.jCal[e][1];console.log(f),"mailto:blizzard@dalaran.worldofwarcraft"!=f[9][3]&&a.events.push({title:f[6][3],start:new Date(f[3][3]).getTime(),end:new Date(f[4][3]).getTime(),organizer:f[9][3],location:f[8][3],description:f[7][3]})}})}]),angular.module("wowApp").run(["$templateCache",function(a){a.put("views/404.html","Oh noes! 404!"),a.put("views/about.html",""),a.put("views/blog.html",'<div class="page-header"> <h3>Blog</h3> </div> <div class="newsList border" ng-controller="NewsCtrl"> <h4>News Feed</h4> <ul class="guild-news"> <li ng-repeat="story in newslog" class="{{story.type}}"> <div class="achievement" ng-show="{{story.type == \'guildAchievement\'}}"> <a ng-href="http://wowhead.com/achievement={{story.achievement.id}}">{{story.achievement.title}}</a> <span class="glyphicon glyphicon-star" aria-hidden="true"></span> Earned By <strong>{{story.character}}</strong> <time><span am-time-ago="story.timestamp"></span></time> </div> <div class="achievement" ng-show="{{story.type == \'playerAchievement\'}}"> <a ng-href="http://wowhead.com/achievement={{story.achievement.id}}">{{story.achievement.title}}</a> <span class="glyphicon glyphicon-star" aria-hidden="true"></span> Earned By <strong>{{story.character}}</strong> <time><span am-time-ago="story.timestamp"></span></time> </div> <div class="itemLooted" ng-show="{{story.type == \'itemLoot\'}}"> <a ng-href="http://wowhead.com/item={{story.itemId}}">{{story.itemId}}</a> <span class="glyphicon glyphicon-gift" aria-hidden="true"></span> Looted By <strong>{{story.character}}</strong> <time><span am-time-ago="story.timestamp"></span></time> </div> <div class="itemBought" ng-show="{{story.type == \'itemPurchase\'}}"> <a ng-href="http://wowhead.com/item={{story.itemId}}">{{story.itemId}}</a> <span class="glyphicon glyphicon-credit-card" aria-hidden="true"></span> Purchased By <strong>{{story.character}}</strong> <time><span am-time-ago="story.timestamp"></span></time> </div> <div class="itemCrafted" ng-show="{{story.type == \'itemCraft\'}}"> <a ng-href="http://wowhead.com/item={{story.itemId}}">{{story.itemId}}</a> <span class="glyphicon glyphicon-wrench" aria-hidden="true"></span> Crafted By <strong>{{story.character}}</strong> <time><span am-time-ago="story.timestamp"></span></time> </div> </li> </ul> </div> <ul class="blog border"> <li ng-repeat="post in posts.data | orderBy : post.id : true"> <h2 ng-bind-html="post.title | markdown"></h2> <img ng-src="{{post.image}}" ng-show="post.image.length" class="header-image"> <div ng-bind-html="post.content"></div> </li> </ul>'),a.put("views/calendar.html",'<div class="page-header"> <h3>Calendar</h3> </div> <p>This page should have... Just the calendar.. Yup.</p> <tien-clndr class="clndr" tien-clndr-object="clndr" tien-clndr-events="events" tien-clndr-options="options" id="full-clndr"> <div class="clndr-controls"> <div class="clndr-previous-button" ng-click="clndr.back()">&lt;</div> <div class="clndr-next-button" ng-click="clndr.forward()">&gt;</div> <div class="current-month">{{month}} {{year}}</div> </div> <div class="clndr-grid"> <div class="days-of-the-week"> <div class="header-day" ng-repeat="day in daysOfTheWeek track by $index"> {{day}} </div> </div> <div class="days"> <div class="{{day.classes}}" ng-repeat="day in days"> <div class="event-indicator" ng-show="day.events.length">{{day.events.length}}</div> {{day.day}} </div> </div> </div> <div class="event-listing"> <div class="event-listing-title">UPCOMING EVENTS IN {{month | uppercase}}</div> <div class="event-item" ng-repeat="event in clndr.eventsThisInterval track by $index" ng-show="clndr.eventsThisInterval.length != 0"> <div class="blizard-event" style="background: pink" ng-show="event.organizer == \'mailto:blizzard@dalaran.worldofwarcraft\'"> <time ng-show="event.start">{{event.start | date : \'MMM dd @ h a\'}} <div ng-hide="event.start == event.end">- {{event.end | date : \'h a\'}}</div></time> <time ng-show="event.date">{{event.date | date : \'MMM dd\'}}</time> <div class="event-item-name">{{event.title}}</div> </div> <div class="guild-event" ng-show="event.organizer != \'mailto:blizzard@dalaran.worldofwarcraft\'"> <time ng-show="event.start">{{event.start | date : \'MMM dd @ h a\'}} <div ng-hide="event.start == event.end">- {{event.end | date : \'h a\'}}</div></time> <time ng-show="event.date">{{event.date | date : \'MMM dd\'}} - </time> <div class="event-item-name"><strong>{{event.title}}</strong></div> <div class="event-item-location" ng-hide="event.location == \'\'">{{event.location}}</div> <div class="event-item-description" ng-hide="event.description == \'\'">{{event.description}}</div> </div> </div> <div class="events-none" ng-show="clndr.eventsThisInterval.length == 0"> <h1>No Events</h1> </div> </div> </tien-clndr>'),a.put("views/main.html",'<div class="page-header"> <h3>About</h3> </div> <p>This page should have... Rules, How to Join, Raid Schedule... etc? </p> <div class="memberList"> <ul class="roster-window"> <li ng-repeat="member in wowData.members | orderObjectBy: \'rank\'" ng-style="{\'background-image\' : \'url(http://render-api-us.worldofwarcraft.com/static-render/us/\' + (member.character.thumbnail | processID) + \'-profilemain.jpg)\'}"> <h3>{{member.character.name | limitTo : \'10\'}}<span ng-if="member.character.name.length > 10">...</span></h3> <img class="wRank" ng-src="images/ranks/{{member.rank}}.png"> </li> </ul> </div>'),a.put("views/new.html",'<div class="row"> <h1>What\'s on your mind?</h1> <p> <a href="#">Write using Markdown.</a> </p> </div> <form ng-submit="submit()"> <div class="form-group"> <textarea ng-model="post.body" autofocus style="width:100%; height:300px">\n    </textarea> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="post.status" ng-init="true"> <span>Publish?</span> </label> </div> <button class="btn btn-success" type="submit">Save</button></form>'),a.put("views/post.html",'<div ng-controller="PostCtrl"> <form ng-submit="postBlog()"> <input ng-model="title"> <input ng-model="imageUrl"> <textarea ng-model="content"></textarea> <button type="submit">Post</button> </form></div>'),a.put("views/roster.html",'<div class="roster"> <div class="page-header"> <h3>Current Roster</h3> </div> <table> <thead> <tr> <th>â€¢</th> <th>Name</th> <th>Rank</th> <th>Race</th> <th>Class</th> <th>Spec</th> <th>Level</th> <th>Achievement Points</th> </tr><tr> </tr></thead> <tbody> <tr ng-repeat="member in wowData.members | orderObjectBy: \'rank\'"> <td><img ng-src="//us.battle.net/static-render/us/{{member.character.thumbnail}}"></td> <td>{{member.character.name | limitTo : \'10\'}}</td> <td><img class="wRank" ng-src="images/ranks/{{member.rank}}.png"></td> <td><a ng-href="//wowhead.com/race={{member.character.race}}"><img class="wRace" ng-src="images/races/{{member.character.gender}}{{member.character.race}}.png"></a></td> <td><a ng-href="//wowhead.com/class={{member.character.class}}"><img class="wClass" ng-src="images/class/64/{{member.character.class}}.png"></a></td> <td><a ng-href="//wowhead.com/class={{member.character.class}}"><img class="wSpec" ng-src="images/spec/{{member.character.class}}/{{member.character.spec.name | lowercase}}.png"></a></td> <td>{{member.character.level}}</td> <td>{{member.character.achievementPoints | number}}<img src="images/ui/sheild.png"></td> </tr> </tbody> </table> </div>'),a.put("views/signup.html","")}]);